<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9.6. functools — Higher order functions and operations on callable objects &mdash; Jython v2.5.2 documentation</title>
    <link rel="stylesheet" href="../_static/green-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Jython v2.5.2 documentation" href="../index.html" />
    <link rel="up" title="9. Numeric and Mathematical Modules" href="numeric.html" />
    <link rel="next" title="9.7. operator — Standard operators as functions" href="operator.html" />
    <link rel="prev" title="9.5. itertools — Functions creating iterators for efficient looping" href="itertools.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="operator.html" title="9.7. operator — Standard operators as functions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="itertools.html" title="9.5. itertools — Functions creating iterators for efficient looping"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Jython v2.5.2 documentation</a> &raquo;</li>
          <li><a href="indexprogress.html" >The Python Standard Library and What Comes with Jython</a> &raquo;</li>
          <li><a href="numeric.html" accesskey="U">9. Numeric and Mathematical Modules</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/jython.png" alt="Logo"/>
            </a></p>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">9.6. <tt class="docutils literal"><span class="pre">functools</span></tt> &#8212; Higher order functions and operations on callable objects</a><ul>
<li><a class="reference external" href="#partial-objects">9.6.1. <tt class="docutils literal"><span class="pre">partial</span></tt> Objects</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="itertools.html"
                                  title="previous chapter">9.5. <tt class="docutils literal"><span class="pre">itertools</span></tt> &#8212; Functions creating iterators for efficient looping</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="operator.html"
                                  title="next chapter">9.7. <tt class="docutils literal docutils literal"><span class="pre">operator</span></tt> &#8212; Standard operators as functions</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/library/functools.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="functools-higher-order-functions-and-operations-on-callable-objects">
<h1>9.6. <tt class="docutils literal"><span class="pre">functools</span></tt> &#8212; Higher order functions and operations on callable objects<a class="headerlink" href="#functools-higher-order-functions-and-operations-on-callable-objects" title="Permalink to this headline">¶</a></h1>
<p>New in version 2.5.</p>
<p>The <tt class="docutils literal"><span class="pre">functools</span></tt> module is for higher-order functions: functions that
act on or return other functions. In general, any callable object can
be treated as a function for the purposes of this module.</p>
<p>The <tt class="docutils literal"><span class="pre">functools</span></tt> module defines the following functions:</p>
<p>functools.reduce(function, iterable[, initializer])</p>
<blockquote>
<p>This is the same function as <tt class="docutils literal"><span class="pre">reduce()</span></tt>.  It is made available in
this module to allow writing code more forward-compatible with
Python 3.</p>
<p>New in version 2.6.</p>
</blockquote>
<p>functools.partial(func[, <a href="#id1"><span class="problematic" id="id2">*</span></a>args][, <a href="#id3"><span class="problematic" id="id4">**</span></a>keywords])</p>
<blockquote>
<p>Return a new <tt class="docutils literal"><span class="pre">partial</span></tt> object which when called will behave like
<em>func</em> called with the positional arguments <em>args</em> and keyword
arguments <em>keywords</em>. If more arguments are supplied to the call,
they are appended to <em>args</em>. If additional keyword arguments are
supplied, they extend and override <em>keywords</em>. Roughly equivalent
to:</p>
<blockquote>
<dl class="docutils">
<dt>def partial(func, <a href="#id5"><span class="problematic" id="id6">*</span></a>args, <a href="#id7"><span class="problematic" id="id8">**</span></a>keywords):</dt>
<dd><dl class="first docutils">
<dt>def newfunc(<a href="#id9"><span class="problematic" id="id10">*</span></a>fargs, <a href="#id11"><span class="problematic" id="id12">**</span></a>fkeywords):</dt>
<dd>newkeywords = keywords.copy()
newkeywords.update(fkeywords)
return func(<a href="#id13"><span class="problematic" id="id14">*</span></a>(args + fargs), <a href="#id15"><span class="problematic" id="id16">**</span></a>newkeywords)</dd>
</dl>
<p class="last">newfunc.func = func
newfunc.args = args
newfunc.keywords = keywords
return newfunc</p>
</dd>
</dl>
</blockquote>
<p>The <tt class="docutils literal"><span class="pre">partial()</span></tt> is used for partial function application which
&#8220;freezes&#8221; some portion of a function&#8217;s arguments and/or keywords
resulting in a new object with a simplified signature.  For
example, <tt class="docutils literal"><span class="pre">partial()</span></tt> can be used to create a callable that
behaves like the <tt class="docutils literal"><span class="pre">int()</span></tt> function where the <em>base</em> argument
defaults to two:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basetwo</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="o">.</span><span class="n">__doc__</span> <span class="o">=</span> <span class="s">&#39;Convert base 2 string to an int.&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basetwo</span><span class="p">(</span><span class="s">&#39;10010&#39;</span><span class="p">)</span>
<span class="go">18</span>
</pre></div>
</div>
</blockquote>
<p>functools.update_wrapper(wrapper, wrapped[, assigned][, updated])</p>
<blockquote>
<p>Update a <em>wrapper</em> function to look like the <em>wrapped</em> function.
The optional arguments are tuples to specify which attributes of
the original function are assigned directly to the matching
attributes on the wrapper function and which attributes of the
wrapper function are updated with the corresponding attributes from
the original function. The default values for these arguments are
the module level constants <em>WRAPPER_ASSIGNMENTS</em> (which assigns to
the wrapper function&#8217;s <em>__name__</em>, <em>__module__</em> and <em>__doc__</em>, the
documentation string) and <em>WRAPPER_UPDATES</em> (which updates the
wrapper function&#8217;s <em>__dict__</em>, i.e. the instance dictionary).</p>
<p>The main intended use for this function is in <em>decorator</em> functions
which wrap the decorated function and return the wrapper. If the
wrapper function is not updated, the metadata of the returned
function will reflect the wrapper definition rather than the
original function definition, which is typically less than helpful.</p>
</blockquote>
<p>functools.wraps(wrapped[, assigned][, updated])</p>
<blockquote>
<p>This is a convenience function for invoking
<tt class="docutils literal"><span class="pre">partial(update_wrapper,</span> <span class="pre">wrapped=wrapped,</span> <span class="pre">assigned=assigned,</span>
<span class="pre">updated=updated)</span></tt> as a function decorator when defining a wrapper
function. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_decorator</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">):</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;Calling decorated function&#39;</span>
<span class="gp">... </span>        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwds</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">wrapper</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@my_decorator</span>
<span class="gp">... </span><span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="sd">&quot;&quot;&quot;Docstring&quot;&quot;&quot;</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">&#39;Called example function&#39;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example</span><span class="p">()</span>
<span class="go">Calling decorated function</span>
<span class="go">Called example function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example</span><span class="o">.</span><span class="n">__name__</span>
<span class="go">&#39;example&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">example</span><span class="o">.</span><span class="n">__doc__</span>
<span class="go">&#39;Docstring&#39;</span>
</pre></div>
</div>
<p>Without the use of this decorator factory, the name of the example
function would have been <tt class="docutils literal"><span class="pre">'wrapper'</span></tt>, and the docstring of the
original <tt class="docutils literal"><span class="pre">example()</span></tt> would have been lost.</p>
</blockquote>
<div class="section" id="partial-objects">
<h2>9.6.1. <tt class="docutils literal"><span class="pre">partial</span></tt> Objects<a class="headerlink" href="#partial-objects" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">partial</span></tt> objects are callable objects created by <tt class="docutils literal"><span class="pre">partial()</span></tt>.
They have three read-only attributes:</p>
<p>partial.func</p>
<blockquote>
A callable object or function.  Calls to the <tt class="docutils literal"><span class="pre">partial</span></tt> object
will be forwarded to <tt class="docutils literal"><span class="pre">func</span></tt> with new arguments and keywords.</blockquote>
<p>partial.args</p>
<blockquote>
The leftmost positional arguments that will be prepended to the
positional arguments provided to a <tt class="docutils literal"><span class="pre">partial</span></tt> object call.</blockquote>
<p>partial.keywords</p>
<blockquote>
The keyword arguments that will be supplied when the <tt class="docutils literal"><span class="pre">partial</span></tt>
object is called.</blockquote>
<p><tt class="docutils literal"><span class="pre">partial</span></tt> objects are like <tt class="docutils literal"><span class="pre">function</span></tt> objects in that they are
callable, weak referencable, and can have attributes.  There are some
important differences.  For instance, the <tt class="docutils literal"><span class="pre">__name__</span></tt> and <tt class="docutils literal"><span class="pre">__doc__</span></tt>
attributes are not created automatically.  Also, <tt class="docutils literal"><span class="pre">partial</span></tt> objects
defined in classes behave like static methods and do not transform
into bound methods during instance attribute look-up.</p>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="operator.html" title="9.7. operator — Standard operators as functions"
             >next</a> |</li>
        <li class="right" >
          <a href="itertools.html" title="9.5. itertools — Functions creating iterators for efficient looping"
             >previous</a> |</li>
        <li><a href="../index.html">Jython v2.5.2 documentation</a> &raquo;</li>
          <li><a href="indexprogress.html" >The Python Standard Library and What Comes with Jython</a> &raquo;</li>
          <li><a href="numeric.html" >9. Numeric and Mathematical Modules</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2011, Jython Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>