<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>19.2. sgmllib — Simple SGML parser &mdash; Jython v2.5.2 documentation</title>
    <link rel="stylesheet" href="../_static/green-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Jython v2.5.2 documentation" href="../index.html" />
    <link rel="up" title="19. Structured Markup Processing Tools" href="markup.html" />
    <link rel="next" title="19.3. htmllib — A parser for HTML documents" href="htmllib.html" />
    <link rel="prev" title="19.1. HTMLParser — Simple HTML and XHTML parser" href="htmlparser.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="htmllib.html" title="19.3. htmllib — A parser for HTML documents"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="htmlparser.html" title="19.1. HTMLParser — Simple HTML and XHTML parser"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Jython v2.5.2 documentation</a> &raquo;</li>
          <li><a href="indexprogress.html" >The Python Standard Library and What Comes with Jython</a> &raquo;</li>
          <li><a href="markup.html" accesskey="U">19. Structured Markup Processing Tools</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/jython.png" alt="Logo"/>
            </a></p>
            <h4>Previous topic</h4>
            <p class="topless"><a href="htmlparser.html"
                                  title="previous chapter">19.1. <tt class="docutils literal docutils literal docutils literal"><span class="pre">HTMLParser</span></tt> &#8212; Simple HTML and XHTML parser</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="htmllib.html"
                                  title="next chapter">19.3. <tt class="docutils literal docutils literal docutils literal"><span class="pre">htmllib</span></tt> &#8212; A parser for HTML documents</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/library/sgmllib.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sgmllib-simple-sgml-parser">
<h1>19.2. <tt class="docutils literal"><span class="pre">sgmllib</span></tt> &#8212; Simple SGML parser<a class="headerlink" href="#sgmllib-simple-sgml-parser" title="Permalink to this headline">¶</a></h1>
<p>Deprecated since version 2.6: The <tt class="docutils literal"><span class="pre">sgmllib</span></tt> module has been removed
in Python 3.0.</p>
<p>This module defines a class <tt class="docutils literal"><span class="pre">SGMLParser</span></tt> which serves as the basis
for parsing text files formatted in SGML (Standard Generalized Mark-up
Language). In fact, it does not provide a full SGML parser &#8212; it only
parses SGML insofar as it is used by HTML, and the module only exists
as a base for the <tt class="docutils literal"><span class="pre">htmllib</span></tt> module.  Another HTML parser which
supports XHTML and offers a somewhat different interface is available
in the <tt class="docutils literal"><span class="pre">HTMLParser</span></tt> module.</p>
<p>class class sgmllib.SGMLParser</p>
<blockquote>
<p>The <tt class="docutils literal"><span class="pre">SGMLParser</span></tt> class is instantiated without arguments. The
parser is hardcoded to recognize the following constructs:</p>
<ul class="simple">
<li>Opening and closing tags of the form <tt class="docutils literal"><span class="pre">&lt;tag</span> <span class="pre">attr=&quot;value&quot;</span> <span class="pre">...&gt;</span></tt>
and <tt class="docutils literal"><span class="pre">&lt;/tag&gt;</span></tt>, respectively.</li>
<li>Numeric character references of the form <tt class="docutils literal"><span class="pre">&amp;#name;</span></tt>.</li>
<li>Entity references of the form <tt class="docutils literal"><span class="pre">&amp;name;</span></tt>.</li>
<li>SGML comments of the form <tt class="docutils literal"><span class="pre">&lt;!--text--&gt;</span></tt>.  Note that spaces,
tabs, and newlines are allowed between the trailing <tt class="docutils literal"><span class="pre">&gt;</span></tt> and the
immediately preceding <tt class="docutils literal"><span class="pre">--</span></tt>.</li>
</ul>
</blockquote>
<p>A single exception is defined as well:</p>
<p>exception exception sgmllib.SGMLParseError</p>
<blockquote>
<p>Exception raised by the <tt class="docutils literal"><span class="pre">SGMLParser</span></tt> class when it encounters an
error while parsing.</p>
<p>New in version 2.1.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">SGMLParser</span></tt> instances have the following methods:</p>
<p>SGMLParser.reset()</p>
<blockquote>
Reset the instance.  Loses all unprocessed data.  This is called
implicitly at instantiation time.</blockquote>
<p>SGMLParser.setnomoretags()</p>
<blockquote>
Stop processing tags.  Treat all following input as literal input
(CDATA). (This is only provided so the HTML tag <tt class="docutils literal"><span class="pre">&lt;PLAINTEXT&gt;</span></tt> can
be implemented.)</blockquote>
<p>SGMLParser.setliteral()</p>
<blockquote>
Enter literal mode (CDATA mode).</blockquote>
<p>SGMLParser.feed(data)</p>
<blockquote>
Feed some text to the parser.  It is processed insofar as it
consists of complete elements; incomplete data is buffered until
more data is fed or <tt class="docutils literal"><span class="pre">close()</span></tt> is called.</blockquote>
<p>SGMLParser.close()</p>
<blockquote>
Force processing of all buffered data as if it were followed by an
end-of-file mark.  This method may be redefined by a derived class
to define additional processing at the end of the input, but the
redefined version should always call <tt class="docutils literal"><span class="pre">close()</span></tt>.</blockquote>
<p>SGMLParser.get_starttag_text()</p>
<blockquote>
Return the text of the most recently opened start tag.  This should
not normally be needed for structured processing, but may be useful
in dealing with HTML &#8220;as deployed&#8221; or for re-generating input with
minimal changes (whitespace between attributes can be preserved,
etc.).</blockquote>
<p>SGMLParser.handle_starttag(tag, method, attributes)</p>
<blockquote>
<p>This method is called to handle start tags for which either a
<tt class="docutils literal"><span class="pre">start_tag()</span></tt> or <tt class="docutils literal"><span class="pre">do_tag()</span></tt> method has been defined.  The <em>tag</em>
argument is the name of the tag converted to lower case, and the
<em>method</em> argument is the bound method which should be used to
support semantic interpretation of the start tag. The <em>attributes</em>
argument is a list of <tt class="docutils literal"><span class="pre">(name,</span> <span class="pre">value)</span></tt> pairs containing the
attributes found inside the tag&#8217;s <tt class="docutils literal"><span class="pre">&lt;&gt;</span></tt> brackets.</p>
<p>The <em>name</em> has been translated to lower case. Double quotes and
backslashes in the <em>value</em> have been interpreted, as well as known
character references and known entity references terminated by a
semicolon (normally, entity references can be terminated by any
non-alphanumerical character, but this would break the very common
case of <tt class="docutils literal"><span class="pre">&lt;A</span> <span class="pre">HREF=&quot;url?spam=1&amp;eggs=2&quot;&gt;</span></tt> when <tt class="docutils literal"><span class="pre">eggs</span></tt> is a valid
entity name).</p>
<p>For instance, for the tag <tt class="docutils literal"><span class="pre">&lt;A</span> <span class="pre">HREF=&quot;http://www.cwi.nl/&quot;&gt;</span></tt>, this
method would be called as <tt class="docutils literal"><span class="pre">unknown_starttag('a',</span> <span class="pre">[('href',</span>
<span class="pre">'http://www.cwi.nl/')])</span></tt>.  The base implementation simply calls
<em>method</em> with <em>attributes</em> as the only argument.</p>
<p>New in version 2.5: Handling of entity and character references
within attribute values.</p>
</blockquote>
<p>SGMLParser.handle_endtag(tag, method)</p>
<blockquote>
This method is called to handle endtags for which an <tt class="docutils literal"><span class="pre">end_tag()</span></tt>
method has been defined.  The <em>tag</em> argument is the name of the tag
converted to lower case, and the <em>method</em> argument is the bound
method which should be used to support semantic interpretation of
the end tag.  If no <tt class="docutils literal"><span class="pre">end_tag()</span></tt> method is defined for the closing
element, this handler is not called.  The base implementation
simply calls <em>method</em>.</blockquote>
<p>SGMLParser.handle_data(data)</p>
<blockquote>
This method is called to process arbitrary data.  It is intended to
be overridden by a derived class; the base class implementation
does nothing.</blockquote>
<p>SGMLParser.handle_charref(ref)</p>
<blockquote>
<p>This method is called to process a character reference of the form
<tt class="docutils literal"><span class="pre">&amp;#ref;</span></tt>. The base implementation uses <tt class="docutils literal"><span class="pre">convert_charref()</span></tt> to
convert the reference to a string.  If that method returns a
string, it is passed to <tt class="docutils literal"><span class="pre">handle_data()</span></tt>, otherwise
<tt class="docutils literal"><span class="pre">unknown_charref(ref)</span></tt> is called to handle the error.</p>
<p>Changed in version 2.5: Use <tt class="docutils literal"><span class="pre">convert_charref()</span></tt> instead of hard-
coding the conversion.</p>
</blockquote>
<p>SGMLParser.convert_charref(ref)</p>
<blockquote>
<p>Convert a character reference to a string, or <tt class="xref docutils literal"><span class="pre">None</span></tt>.  <em>ref</em> is
the reference passed in as a string.  In the base implementation,
<em>ref</em> must be a decimal number in the range 0-255.  It converts the
code point found using the <tt class="docutils literal"><span class="pre">convert_codepoint()</span></tt> method. If <em>ref</em>
is invalid or out of range, this method returns <tt class="xref docutils literal"><span class="pre">None</span></tt>.  This
method is called by the default <tt class="docutils literal"><span class="pre">handle_charref()</span></tt> implementation
and by the attribute value parser.</p>
<p>New in version 2.5.</p>
</blockquote>
<p>SGMLParser.convert_codepoint(codepoint)</p>
<blockquote>
<p>Convert a codepoint to a <tt class="docutils literal"><span class="pre">str</span></tt> value.  Encodings can be handled
here if appropriate, though the rest of <tt class="docutils literal"><span class="pre">sgmllib</span></tt> is oblivious on
this matter.</p>
<p>New in version 2.5.</p>
</blockquote>
<p>SGMLParser.handle_entityref(ref)</p>
<blockquote>
<p>This method is called to process a general entity reference of the
form <tt class="docutils literal"><span class="pre">&amp;ref;</span></tt> where <em>ref</em> is an general entity reference.  It
converts <em>ref</em> by passing it to <tt class="docutils literal"><span class="pre">convert_entityref()</span></tt>.  If a
translation is returned, it calls the method <tt class="docutils literal"><span class="pre">handle_data()</span></tt> with
the translation; otherwise, it calls the method
<tt class="docutils literal"><span class="pre">unknown_entityref(ref)</span></tt>. The default <tt class="docutils literal"><span class="pre">entitydefs</span></tt> defines
translations for <tt class="docutils literal"><span class="pre">&amp;amp;</span></tt>, <tt class="docutils literal"><span class="pre">&amp;apos</span></tt>, <tt class="docutils literal"><span class="pre">&amp;gt;</span></tt>, <tt class="docutils literal"><span class="pre">&amp;lt;</span></tt>, and
<tt class="docutils literal"><span class="pre">&amp;quot;</span></tt>.</p>
<p>Changed in version 2.5: Use <tt class="docutils literal"><span class="pre">convert_entityref()</span></tt> instead of
hard-coding the conversion.</p>
</blockquote>
<p>SGMLParser.convert_entityref(ref)</p>
<blockquote>
<p>Convert a named entity reference to a <tt class="docutils literal"><span class="pre">str</span></tt> value, or <tt class="xref docutils literal"><span class="pre">None</span></tt>.
The resulting value will not be parsed.  <em>ref</em> will be only the
name of the entity. The default implementation looks for <em>ref</em> in
the instance (or class) variable <tt class="docutils literal"><span class="pre">entitydefs</span></tt> which should be a
mapping from entity names to corresponding translations.  If no
translation is available for <em>ref</em>, this method returns <tt class="xref docutils literal"><span class="pre">None</span></tt>.
This method is called by the default <tt class="docutils literal"><span class="pre">handle_entityref()</span></tt>
implementation and by the attribute value parser.</p>
<p>New in version 2.5.</p>
</blockquote>
<p>SGMLParser.handle_comment(comment)</p>
<blockquote>
This method is called when a comment is encountered.  The <em>comment</em>
argument is a string containing the text between the <tt class="docutils literal"><span class="pre">&lt;!--</span></tt> and
<tt class="docutils literal"><span class="pre">--&gt;</span></tt> delimiters, but not the delimiters themselves.  For
example, the comment <tt class="docutils literal"><span class="pre">&lt;!--text--&gt;</span></tt> will cause this method to be
called with the argument <tt class="docutils literal"><span class="pre">'text'</span></tt>.  The default method does
nothing.</blockquote>
<p>SGMLParser.handle_decl(data)</p>
<blockquote>
Method called when an SGML declaration is read by the parser.  In
practice, the <tt class="docutils literal"><span class="pre">DOCTYPE</span></tt> declaration is the only thing observed in
HTML, but the parser does not discriminate among different (or
broken) declarations.  Internal subsets in a <tt class="docutils literal"><span class="pre">DOCTYPE</span></tt>
declaration are not supported.  The <em>data</em> parameter will be the
entire contents of the declaration inside the <tt class="docutils literal"><span class="pre">&lt;!</span></tt>...``&gt;``
markup.  The default implementation does nothing.</blockquote>
<p>SGMLParser.report_unbalanced(tag)</p>
<blockquote>
This method is called when an end tag is found which does not
correspond to any open element.</blockquote>
<p>SGMLParser.unknown_starttag(tag, attributes)</p>
<blockquote>
This method is called to process an unknown start tag.  It is
intended to be overridden by a derived class; the base class
implementation does nothing.</blockquote>
<p>SGMLParser.unknown_endtag(tag)</p>
<blockquote>
This method is called to process an unknown end tag.  It is
intended to be overridden by a derived class; the base class
implementation does nothing.</blockquote>
<p>SGMLParser.unknown_charref(ref)</p>
<blockquote>
This method is called to process unresolvable numeric character
references. Refer to <tt class="docutils literal"><span class="pre">handle_charref()</span></tt> to determine what is
handled by default.  It is intended to be overridden by a derived
class; the base class implementation does nothing.</blockquote>
<p>SGMLParser.unknown_entityref(ref)</p>
<blockquote>
This method is called to process an unknown entity reference.  It
is intended to be overridden by a derived class; the base class
implementation does nothing.</blockquote>
<p>Apart from overriding or extending the methods listed above, derived
classes may also define methods of the following form to define
processing of specific tags. Tag names in the input stream are case
independent; the <em>tag</em> occurring in method names must be in lower
case:</p>
<p>SGMLParser.start_tag(attributes)</p>
<blockquote>
This method is called to process an opening tag <em>tag</em>.  It has
preference over <tt class="docutils literal"><span class="pre">do_tag()</span></tt>.  The <em>attributes</em> argument has the
same meaning as described for <tt class="docutils literal"><span class="pre">handle_starttag()</span></tt> above.</blockquote>
<p>SGMLParser.do_tag(attributes)</p>
<blockquote>
This method is called to process an opening tag <em>tag</em>  for which no
<tt class="docutils literal"><span class="pre">start_tag()</span></tt> method is defined.   The <em>attributes</em> argument has
the same meaning as described for <tt class="docutils literal"><span class="pre">handle_starttag()</span></tt> above.</blockquote>
<p>SGMLParser.end_tag()</p>
<blockquote>
This method is called to process a closing tag <em>tag</em>.</blockquote>
<p>Note that the parser maintains a stack of open elements for which no
end tag has been found yet.  Only tags processed by <tt class="docutils literal"><span class="pre">start_tag()</span></tt>
are pushed on this stack.  Definition of an <tt class="docutils literal"><span class="pre">end_tag()</span></tt> method is
optional for these tags.  For tags processed by <tt class="docutils literal"><span class="pre">do_tag()</span></tt> or by
<tt class="docutils literal"><span class="pre">unknown_tag()</span></tt>, no <tt class="docutils literal"><span class="pre">end_tag()</span></tt> method must be defined; if
defined, it will not be used.  If both <tt class="docutils literal"><span class="pre">start_tag()</span></tt> and
<tt class="docutils literal"><span class="pre">do_tag()</span></tt> methods exist for a tag, the <tt class="docutils literal"><span class="pre">start_tag()</span></tt> method takes
precedence.</p>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="htmllib.html" title="19.3. htmllib — A parser for HTML documents"
             >next</a> |</li>
        <li class="right" >
          <a href="htmlparser.html" title="19.1. HTMLParser — Simple HTML and XHTML parser"
             >previous</a> |</li>
        <li><a href="../index.html">Jython v2.5.2 documentation</a> &raquo;</li>
          <li><a href="indexprogress.html" >The Python Standard Library and What Comes with Jython</a> &raquo;</li>
          <li><a href="markup.html" >19. Structured Markup Processing Tools</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; <a href="../copyright.html">Copyright</a> 2011, Jython Project.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>